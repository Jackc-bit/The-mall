<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DYCI Organizations</title>
<style>
  :root{
    --accent: #0a66ff;
    --panel-height: 90vh;
    --panel-radius: 24px;
    --bg-blur: 6px;
  }

  /* ---------- Page basics ---------- */
  html,body{height:100%;margin:0;font-family:Arial, Helvetica, sans-serif;background:#04102a;color:#fff}
  .page {max-width:1200px;margin:0 auto;padding:20px;}
  h1{text-align:center;margin:6px 0 18px;font-size:28px;text-shadow:0 2px 8px rgba(0,0,0,0.6)}

  /* ---------- Grid of png buttons (image-only buttons) ---------- */
  .grid {
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
    gap:16px;
    align-items:start;
    padding:8px;
  }

  .imgBtn {
    position:relative;
    width:100%;
    padding-top:70%;               /* aspect area for each button */
    border-radius:14px;
    overflow:hidden;
    background-size:cover;
    background-position:center;
    border: 2px solid rgba(255,255,255,0.06);
    box-shadow: 0 8px 24px rgba(0,0,0,0.35);
    cursor:pointer;
    transition: transform .12s ease, box-shadow .12s ease;
  }
  .imgBtn:active{ transform: scale(.98); }
  .imgBtn .label {
    position:absolute;
    bottom:8px; left:8px; right:8px;
    font-size:12px; text-align:center; color: rgba(255,255,255,0.95);
    text-shadow:0 2px 6px rgba(0,0,0,0.5);
    pointer-events:none;
  }

  /* ---------- Classic slide-up overlay + panel ---------- */
  .overlay {
    position:fixed;
    inset:0;
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(var(--bg-blur));
    -webkit-backdrop-filter: blur(var(--bg-blur));
    opacity:0;
    pointer-events:none;
    transition:opacity .28s ease;
    z-index:80;
  }
  .overlay.open { opacity:1; pointer-events:auto; }

  .panel {
    position:fixed;
    left:0;
    right:0;
    bottom:-100%;
    height:var(--panel-height);
    margin:auto;
    max-width:1100px;
    border-radius: var(--panel-radius) var(--panel-radius) 0 0;
    background: linear-gradient(180deg, rgba(6,10,18,0.98), rgba(8,12,20,0.96));
    box-shadow: 0 -18px 60px rgba(0,0,0,0.6);
    overflow:hidden;
    transform:translateY(0);
    transition: bottom .38s cubic-bezier(.2,.9,.2,1);
    z-index:90;
    display:flex;
    flex-direction:column;
    margin-left:auto;margin-right:auto;
  }

  .panel.open { bottom:0; }

  .panel-header {
    padding:14px 18px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    border-bottom:1px solid rgba(255,255,255,0.03);
  }
  .panel-title { font-size:20px; font-weight:600; color:#fff; }
  .panel-body { padding:12px 18px; flex:1; display:flex; align-items:center; justify-content:center; }

  /* Close button at bottom */
  .panel-footer {
    padding:14px 18px;
    border-top:1px solid rgba(255,255,255,0.03);
    display:flex;
    justify-content:center;
    gap:12px;
  }
  .closeBtn {
    background:var(--accent); color:#fff; border:none; padding:12px 24px; border-radius:12px; cursor:pointer; font-weight:700;
  }

  /* ---------- Responsive slideshow container (auto-fit) ---------- */
  .slideshow-wrap {
    width: 100%;
    max-width: 920px;
    margin: 0 auto;
    border-radius: 12px;
    background: #000;
    overflow: hidden;
    display:block;
    position:relative;
    /* default ratio will be overwritten by orientation classes */
    aspect-ratio: 16/9;
    max-height: calc(var(--panel-height) - 160px);
  }
  .slideshow-wrap.portrait { aspect-ratio: 9/16; max-width:560px; }
  .slideshow-wrap.landscape { aspect-ratio: 16/9; max-width:920px; }

  .slides { width:100%; height:100%; position:relative; }
  .slides img {
    position:absolute; inset:0; width:100%; height:100%;
    object-fit:cover;
    opacity:0; transition:opacity .6s ease;
    background:#000;
  }
  .slides img.visible { opacity:1; z-index:2; }

  /* If portrait-first requested, make first image contain so it shows whole */
  .slides.portrait img:first-child { object-fit:contain; background:#000; }

  /* small info text inside panel */
  .infoText { color:rgba(255,255,255,0.9); font-size:14px; text-align:center; max-width:920px; margin:10px auto 0; }

  @media (max-width:520px){
    .imgBtn{ padding-top:82% }
    .slideshow-wrap.portrait{ max-width:92vw; }
    .slideshow-wrap{ max-width:92vw; }
    .panel { height: 92vh; }
  }
</style>
</head>
<body>
  <div class="page">
    <h1>DYCI Organizations</h1>

    <div class="grid" id="grid"></div>
  </div>

  <!-- overlay + single panel -->
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <div id="panel" class="panel" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="panel-header">
      <div class="panel-title" id="panelTitle">Organization</div>
      <div>
        <button id="panelPrev" style="display:none" class="closeBtn">Prev</button>
        <button id="panelNext" style="display:none" class="closeBtn">Next</button>
      </div>
    </div>

    <div class="panel-body" id="panelBody">
      <!-- dynamic content (slideshow or image + text) gets injected here -->
    </div>

    <div class="panel-footer">
      <button id="panelClose" class="closeBtn">Close</button>
    </div>
  </div>

<script>
/* ========== Data: org -> png mapping (filenames must match your repo) ========== */
const ORG_MAP = {
  "SIBOL":"Sibol.png","ARCHERY":"Archery.png","ASCEND":"Ascend.png","AVANT GARDE":"Avant_Garde.png",
  "AXIOM":"Axiom.png","COACHES":"Coaches.png","CSL":"Csl.png","DANCE TROUPE":"Dance_Troupe.png",
  "DEBATE SOCIETY":"Debate_Society.png","DGITS":"Dgits.png","DYCI CREATIVES TEAM":"Dyci_Creatives_Team.png",
  "DYCI DAGALAK":"Dyci_Dagalak.png","DYCI LIGHT":"Dyci_Light.png","DYCI NOVELLUS":"Dyci_Novellus.png",
  "DYCI PRIMES":"Dyci_Primes.png","DYCIAN LIVE":"Dycian_Live.png","ENGLISH FACILITATORS":"English_Facilitators.png",
  "FENCING":"Fencing.png","GLOBALIVE":"Globalive.png","GREEN GROUP":"Green_Group.png","HIMIG DYCIAN":"Himig_Dycian.png",
  "LITURGICAL CHOIR":"Liturgical_Choir.png","MINISTRY OF ALTAR SERVICES":"Ministry_Of_Altar_Services.png",
  "PEER FACILITATORS CIRCLE":"Peer_Facilitators_Circle.png","SCSL":"Scsl.png","SENTINELS":"Sentinels.png",
  "SEQUENTIA STUDIOS":"Sequentia_Studios.png","SOCIETAL TYCOONS":"Societal_Tycoons.png","SPEAKERS SOCIETY":"Speakers_Society.png",
  "STRINGS SOCIETY":"Strings_Society.png","STRINGS ENSEMBLE":"Strings_Ensemble.png","SYMPHONIA":"Symphonia.png",
  "TAEKWONDO":"Taekwondo.png","TAKEOFF":"Takeoff.png","THE ANG DYCIAN":"The_Ang_Dycian.png",
  "TVQA":"Tvqa.png","UNICUS":"Unicus.png","USBONG":"Usbong.png","VERBUM DOMINI":"Verbum_Domini.png"
};

/* ASCEND slideshow files (exact filenames in repo) */
const ASCEND_SLIDES = [
  "ASCEND_ORGM.png",
  "ASCEND_ORG1.JPG",
  "ASCEND_ORG2.JPG",
  "ASCEND_ORG3.JPG",
  "ASCEND_ORG4.JPG",
  "ASCEND_ORG5.JPG",
  "ASCEND_ORG6.JPG"
];

/* ========== Build grid of PNG buttons ========== */
const grid = document.getElementById('grid');
Object.entries(ORG_MAP).forEach(([name,file])=>{
  const btn = document.createElement('button');
  btn.className = 'imgBtn';
  btn.style.backgroundImage = `url("${file}")`;
  btn.title = name;

  const label = document.createElement('div');
  label.className = 'label';
  label.textContent = name;
  btn.appendChild(label);

  btn.addEventListener('click', ()=> openOrg(name) );
  grid.appendChild(btn);
});

/* ========== Panel & slideshow behavior ========== */
const overlay = document.getElementById('overlay');
const panel = document.getElementById('panel');
const panelTitle = document.getElementById('panelTitle');
const panelBody = document.getElementById('panelBody');
const panelClose = document.getElementById('panelClose');
const panelPrev = document.getElementById('panelPrev');
const panelNext = document.getElementById('panelNext');

let slideTimer = null;
let slideIndex = 0;
let currentImgs = [];
let slidesElem = null;

/* Open and close panel helpers */
function openPanelUI(){
  overlay.classList.add('open');
  panel.classList.add('open');
  overlay.setAttribute('aria-hidden','false');
  panel.setAttribute('aria-hidden','false');
}
function closePanelUI(){
  overlay.classList.remove('open');
  panel.classList.remove('open');
  overlay.setAttribute('aria-hidden','true');
  panel.setAttribute('aria-hidden','true');
  stopSlides();
}

/* click outside (overlay) closes */
overlay.addEventListener('click', closePanelUI);
panelClose.addEventListener('click', closePanelUI);
document.addEventListener('keydown', (e)=> { if (e.key === 'Escape') closePanelUI(); });

/* Prev/Next controls, used only with ASCEND slideshow */
panelPrev.addEventListener('click', ()=> changeSlide(-1));
panelNext.addEventListener('click', ()=> changeSlide(1));

/* Open an organization */
function openOrg(name){
  panelTitle.textContent = name;
  panelBody.innerHTML = '';        // clear previous
  panelPrev.style.display = 'none';
  panelNext.style.display = 'none';
  stopSlides();

  if (name === "ASCEND"){
    buildAscendSlideshow();
  } else {
    // simple single-image view for other orgs
    const wrap = document.createElement('div');
    wrap.className = 'slideshow-wrap landscape';
    const slides = document.createElement('div');
    slides.className = 'slides';
    const img = document.createElement('img');
    img.src = ORG_MAP[name] || '';
    img.alt = name;
    // when loaded, decide orientation to center nicely
    img.addEventListener('load', ()=>{
      if (img.naturalHeight > img.naturalWidth){
        wrap.classList.replace('landscape','portrait');
      } else {
        wrap.classList.replace('portrait','landscape');
      }
      img.classList.add('visible');
    });
    slides.appendChild(img);
    wrap.appendChild(slides);
    panelBody.appendChild(wrap);

    const info = document.createElement('div');
    info.className = 'infoText';
    info.textContent = `Information about ${name} goes here.`;
    panelBody.appendChild(info);
  }

  openPanelUI();
}

/* Build ASCEND slideshow dynamically (only when opened) */
function buildAscendSlideshow(){
  const wrap = document.createElement('div');
  wrap.className = 'slideshow-wrap landscape';
  const slides = document.createElement('div');
  slides.className = 'slides';

  currentImgs = ASCEND_SLIDES.map(src=>{
    const img = document.createElement('img');
    img.src = src;
    img.alt = '';
    slides.appendChild(img);
    return img;
  });

  wrap.appendChild(slides);
  panelBody.appendChild(wrap);
  slidesElem = slides;

  // Show controls
  panelPrev.style.display = 'inline-block';
  panelNext.style.display = 'inline-block';

  // Wait for first image load to determine orientation and object-fit rules
  currentImgs[0].addEventListener('load', function handler(){
    const first = currentImgs[0];
    if (first.naturalHeight > first.naturalWidth){
      // portrait-first behavior
      wrap.classList.remove('landscape'); wrap.classList.add('portrait');
      slides.classList.add('portrait'); // first image will be object-fit:contain (via CSS rule)
      // set object-fit for others
      for (let i=1;i<currentImgs.length;i++) currentImgs[i].style.objectFit = 'cover';
    } else {
      // treat as landscape
      wrap.classList.remove('portrait'); wrap.classList.add('landscape');
      slides.classList.remove('portrait');
      currentImgs.forEach(img=> img.style.objectFit = 'cover');
    }

    // ensure first image visible, then start interval
    startSlides();
    currentImgs[0].removeEventListener('load', handler);
  });

  // Footer info
  const info = document.createElement('div');
  info.className = 'infoText';
  info.textContent = `ASCEND gallery â€” ${ASCEND_SLIDES.length} images. Slideshow auto-fits and centers for your device.`;
  panelBody.appendChild(info);
}

/* Slideshow control functions */
function startSlides(){
  stopSlides();
  if (!currentImgs || currentImgs.length === 0) return;

  slideIndex = 0;
  currentImgs.forEach(img => img.classList.remove('visible'));
  currentImgs[0].classList.add('visible');

  slideTimer = setInterval(()=>{
    if (currentImgs[slideIndex]) currentImgs[slideIndex].classList.remove('visible');
    slideIndex = (slideIndex + 1) % currentImgs.length;
    if (currentImgs[slideIndex]) currentImgs[slideIndex].classList.add('visible');
  }, 5000);
}

function stopSlides(){
  clearInterval(slideTimer);
  slideTimer = null;
  currentImgs = [];
  slidesElem = null;
  panelPrev.style.display = 'none';
  panelNext.style.display = 'none';
}

function changeSlide(delta){
  if (!currentImgs || currentImgs.length === 0) return;
  if (slideTimer) { clearInterval(slideTimer); slideTimer = null; }
  if (currentImgs[slideIndex]) currentImgs[slideIndex].classList.remove('visible');
  slideIndex = (slideIndex + delta + currentImgs.length) % currentImgs.length;
  if (currentImgs[slideIndex]) currentImgs[slideIndex].classList.add('visible');
  // restart autoplay
  slideTimer = setInterval(()=>{
    if (currentImgs[slideIndex]) currentImgs[slideIndex].classList.remove('visible');
    slideIndex = (slideIndex + 1) % currentImgs.length;
    if (currentImgs[slideIndex]) currentImgs[slideIndex].classList.add('visible');
  }, 5000);
}

/* Preload small button images (lets browser cache button backgrounds quickly) */
(function preloadButtons(){
  Object.values(ORG_MAP).forEach(src => { const i = new Image(); i.src = src; });
})();

</script>
</body>
</html>
